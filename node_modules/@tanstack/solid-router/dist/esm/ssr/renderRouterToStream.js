import * as Solid from "solid-js/web";
import { isbot } from "isbot";
import { transformReadableStreamWithRouter } from "@tanstack/router-core/ssr/server";
const renderRouterToStream = async ({
  request,
  router,
  responseHeaders,
  children
}) => {
  const {
    writable,
    readable
  } = new TransformStream();
  const stream = Solid.renderToStream(children);
  if (isbot(request.headers.get("User-Agent"))) {
    await stream;
  }
  stream.pipeTo(writable);
  const responseStream = transformReadableStreamWithRouter(router, readable);
  return new Response(responseStream, {
    status: router.state.statusCode,
    headers: responseHeaders
  });
};
export {
  renderRouterToStream
};
//# sourceMappingURL=renderRouterToStream.js.map
